<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Workout Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    nav { display: flex; background: #222; color: #fff; }
    nav button { flex: 1; padding: 1em; background: #222; color: #fff; border: none; cursor: pointer; font-size: 1rem; }
    nav button.active { background: #444; }
    .tab { display: none; padding: 1em; }
    .tab.active { display: block; }
    input, select, button, textarea { 
      margin: 0.25em 0; 
      padding: 0.5em; 
      font-size: 1rem; /* prevents iOS zoom */
    }
    .exercise-item { margin: 0.25em 0; padding: 0.5em; border-bottom: 1px solid #ccc; }
    .set-form { margin-top: 1em; }
    .set-log { margin-top: 1em; padding: 0.5em; border-bottom: 1px solid #eee; }
  </style>
</head>
<body>
  <nav>
    <button id="trackerTabBtn" class="active">Tracker</button>
    <button id="exercisesTabBtn">Exercises</button>
  </nav>

  <!-- Tracker Tab -->
  <div id="trackerTab" class="tab active">
    <h2>Workout Tracker</h2>
    <label>Day Type:
      <select id="dayTypeSelect">
        <option value="">--Choose--</option>
        <option value="push">Push</option>
        <option value="pull">Pull</option>
        <option value="legs">Legs</option>
      </select>
    </label>

    <div id="exerciseSelectWrapper" style="display:none;">
      <label>Exercise:
        <select id="exerciseSelect"></select>
      </label>

      <div id="setForm" class="set-form" style="display:none;">
        <label>Reps: <input type="number" id="repsInput"></label><br>
        <label>Weight (lbs): <input type="number" id="weightInput"></label><br>
        <label>Rest (sec): <input type="number" id="restInput"></label><br>
        <label>Notes: <input type="text" id="notesInput"></label><br>
        <button id="saveSetBtn">Save Set</button>
      </div>
    </div>

    <h3>Logged Sets</h3>
    <div id="setsLog"></div>
  </div>

  <!-- Exercises Tab -->
  <div id="exercisesTab" class="tab">
    <h2>Exercises Database</h2>
    <label>Exercise Name: <input id="exerciseName" type="text"></label><br>
    <label><input type="checkbox" value="push" class="tagCheckbox"> Push</label>
    <label><input type="checkbox" value="pull" class="tagCheckbox"> Pull</label>
    <label><input type="checkbox" value="legs" class="tagCheckbox"> Legs</label><br>
    <button id="addExerciseBtn">Add Exercise</button>

    <h3>Saved Exercises</h3>
    <div id="exerciseList"></div>
  </div>

<script>
let exercisesDB = JSON.parse(localStorage.getItem("exercisesDB")) || [];
let setsLog = JSON.parse(localStorage.getItem("setsLog")) || [];

// --- Tab Switching ---
function switchTab(tab) {
  document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
  document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
  document.getElementById(tab+"Tab").classList.add("active");
  document.getElementById(tab+"TabBtn").classList.add("active");
}
document.getElementById("trackerTabBtn").onclick = () => switchTab("tracker");
document.getElementById("exercisesTabBtn").onclick = () => switchTab("exercises");

// --- Add Exercise ---
document.getElementById("addExerciseBtn").onclick = () => {
  const name = document.getElementById("exerciseName").value.trim();
  const tags = Array.from(document.querySelectorAll(".tagCheckbox:checked")).map(cb => cb.value);
  if (!name || tags.length === 0) {
    alert("Enter name and select at least one tag.");
    return;
  }
  exercisesDB.push({ name, tags });
  localStorage.setItem("exercisesDB", JSON.stringify(exercisesDB));
  document.getElementById("exerciseName").value = "";
  document.querySelectorAll(".tagCheckbox").forEach(cb => cb.checked = false);
  renderExerciseList();
};

function renderExerciseList() {
  const listDiv = document.getElementById("exerciseList");
  listDiv.innerHTML = "";
  exercisesDB.forEach(ex => {
    const div = document.createElement("div");
    div.className = "exercise-item";
    div.textContent = ex.name + " (" + ex.tags.join(", ") + ")";
    listDiv.appendChild(div);
  });
}
renderExerciseList();

// --- Tracker Dropdowns ---
document.getElementById("dayTypeSelect").onchange = () => {
  const type = document.getElementById("dayTypeSelect").value;
  const wrapper = document.getElementById("exerciseSelectWrapper");
  const select = document.getElementById("exerciseSelect");
  if (!type) {
    wrapper.style.display = "none";
    return;
  }
  const filtered = exercisesDB.filter(ex => ex.tags.includes(type));
  select.innerHTML = "";
  filtered.forEach(ex => {
    const opt = document.createElement("option");
    opt.value = ex.name;
    opt.textContent = ex.name;
    select.appendChild(opt);
  });
  wrapper.style.display = filtered.length > 0 ? "block" : "none";
  document.getElementById("setForm").style.display = "none";
};

// Show set form when exercise chosen
document.getElementById("exerciseSelect").onchange = () => {
  document.getElementById("setForm").style.display = "block";
};

// --- Save Set ---
document.getElementById("saveSetBtn").onclick = () => {
  const exName = document.getElementById("exerciseSelect").value;
  const reps = document.getElementById("repsInput").value;
  const weight = document.getElementById("weightInput").value;
  const rest = document.getElementById("restInput").value;
  const notes = document.getElementById("notesInput").value;

  if (!exName || !reps || !weight) {
    alert("Please enter exercise, reps, and weight.");
    return;
  }

  const setData = { exName, reps, weight, rest, notes, date: new Date().toISOString() };
  setsLog.push(setData);
  localStorage.setItem("setsLog", JSON.stringify(setsLog));
  renderSetsLog();

  // Clear inputs for next entry
  document.getElementById("repsInput").value = "";
  document.getElementById("weightInput").value = "";
  document.getElementById("restInput").value = "";
  document.getElementById("notesInput").value = "";
};

function renderSetsLog() {
  const logDiv = document.getElementById("setsLog");
  logDiv.innerHTML = "";
  setsLog.forEach(set => {
    const div = document.createElement("div");
    div.className = "set-log";
    div.textContent = `${set.exName} â€” ${set.reps} reps @ ${set.weight} lbs` +
      (set.rest ? `, Rest: ${set.rest}s` : "") +
      (set.notes ? `, Notes: ${set.notes}` : "");
    logDiv.appendChild(div);
  });
}
renderSetsLog();
</script>
</body>
</html>


